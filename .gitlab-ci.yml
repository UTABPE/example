## Metadata
## !!! PLEASE DO NOT EDIT THIS FILE IF YOU DON'T KNOW WHAT ARE YOU DOING !!!
## Author: Ilyas Tuyakbayev <ilyas.tuyakbayev@gmail.com>

stages:
  - testing
  - versioning
  - build
  - containerize
  - deploy

include:
  - local: '.ci_vars_prod.yml'
    rules:
      - if: '$CI_COMMIT_REF_NAME =~ /^?(\d+(?:\.\d+)*)$/ && $CI_MERGE_REQUEST_ID == null'
  - local: '.ci_vars_test.yml'
    rules:
      - if: '$CI_COMMIT_REF_NAME =~ /test/ && $CI_MERGE_REQUEST_ID == null'
  - project: 'kaptechnology/devops/gitlab-ci-templates'
    ref: main
    file: 'testing/react.yml'
  - project: 'kaptechnology/devops/gitlab-ci-templates'
    ref: main
    file: 'versioning/semantic-release.yml'
  - project: 'kaptechnology/devops/gitlab-ci-templates'
    ref: main
    file: 'build/react-craco.yml'
  - project: 'kaptechnology/devops/gitlab-ci-templates'
    ref: main
    file: 'containerize/kaniko-react.yml'
  - project: 'kaptechnology/devops/gitlab-ci-templates'
    ref: main
    file: 'deploy/k8s.yml'
